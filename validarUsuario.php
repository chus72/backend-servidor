<?phpinclude "AuxDB.php";include "clUsuario.php";$condiciones='';$usuarioCorrecto='';$emailCorrecto='';$passwordCorrecto='';// si recibimos par치metros desde postif (isset($_POST['enviar'])) {	$db = new AuxDB();	$db->conectar();	 if(empty($_POST['condiciones']))  	   $condiciones = "error";	// creamos un nuevo usuario y lo validamos	$oUsuario = new Usuario($_POST['Usuario'],$_POST['email2'],$_POST['Password2']);	// validamos el campo Usuario	$usuarioCorrecto = $oUsuario->validarUsuario ($_POST['Usuario']);	if ($usuarioCorrecto == 'existe') { //Usuario ya existente		$rst = $oUsuario->leerUsuario($existe); // $oUsuario contiene el usuario actual		printf("Usuario %s ya existe\n", $oUsuario->getUsuarioID());	}else if ($usuarioCorrecto == 'error'){ // error en el formato de usuario		printf("Usuario con formato err칩neo");	}else {		//printf("Usuario %s no existe",$oUsuario->getUsuarioID());	}			// validamos el campo del password	$passwordCorrecto = $oUsuario->validarPassword ($_POST['Password'],$_POST['Password2']);	if ($passwordCorrecto == 'long') {		printf('Longitud entre 5 y 12');	}else if ($passwordCorrecto == 'carac') {		printf('Caracteres en el password incorrectos');	}else if ($passwordCorrecto == 'dif') {		printf('Password diferentes');	}else {		//printf('Password correcto : %s',$oUsuario->getPassword());	}	// validamos el campo Email	$emailCorrecto = $oUsuario->validarEmail($_POST['email'],$_POST['email2']);	if ($emailCorrecto == 'error') {		printf('Fallo en el formato del email');	}else {		//printf('Email correcto : %s',$oUsuario->getEmail());	}	$status = 0;	//Comprobamos si los datos introducidos est치n todos con el formato correcto	if ($usuarioCorrecto == $oUsuario->getUsuarioID() && $emailCorrecto == $oUsuario->getEmail() && $passwordCorrecto == $oUsuario->getPassword() && $condiciones == '') {			// comprobamos que no exista el email en la BDD		$status = 1;	}	if($emailCorrecto == "existe"){			printf('Ya existe el email en la BDD');			$status = 0;		}	printf($emailCorrecto);	if($emailCorrecto == 'dif') {		printf('Los emails no coinciden');		$status = 0;	}	// compruebo las condiciones	if($condiciones=='error') {		printf('Tienes que aceptar las condiciones');		$status = 0;	} 		// Ingresamos el usuario en la tabla temporal a la espera de ser validado	if ($status) {		$oUsuario->insertarUsuarioTemp();// Enviamos un mail de activaci칩n al usuario 		$oUsuario->mailActivacion();	}	$db->desconectar();}?>